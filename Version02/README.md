# 주변 시설물과 범죄율 상관관계 분석

## 🧑‍🍳 팀명: 쿠킹

### 👥 팀원
김범석, 남우현, 류제무, 박준혁  
분석 언어: Python

---

## 🧩 팀원 역할

- **팀원 1**: 문제 정의 및 조사 담당  
  - 주제 선정 이유, 가설, 필요성 등 작성  
  - 선행연구 사례 조사 및 시사점 도출  
  - 결과 예상 및 활용 방안 기획

- **팀원 2**: 데이터 수집 및 전처리  
  - 서울시 범죄 관련 데이터 수집  
  - 위도, 경도 포함 데이터 확보  
  - 필요한 데이터 정리 및 CSV 파일화

- **팀원 3**: Python 기반 분석  
  - 상관관계 분석 및 가설 검증  
  - 가설 기각 시 원인 분석 수행  
  - HTML 지도 기반 시각화 구현

- **팀원 4**: 발표 담당  
  - 발표 자료(PPT) 제작  
  - 전체 내용 정리 및 최종 발표  
  - 시사점, 한계점, 향후 활용 방안 정리

---

## 🛠️ 분석 절차

1. 주제 설정  
2. 주제 세분화 (서울시 자치구 중심)  
3. 가설 설정  
4. 데이터 수집  
5. 데이터 전처리  
6. 분석 방법 정리  
7. Python 기반 분석  
8. 시각화 및 결론 도출

---

## 💡 가설 설정

> “서울시 자치구별 주변 시설은 총범죄 발생에 유의미한 영향을 미친다.”

---

## 📂 사용 데이터

| 자치구 | CCTV수 | 총범죄 | 인구수 | 평균소득 | 유흥주점수 | 가로등수 |
|--------|--------|--------|--------|----------|------------|----------|

데이터는 공공데이터포털, 서울열린데이터광장 등에서 수집하였으며, `merged.csv` 파일로 통합 전처리하였습니다. 시각화를 위해 서울시 자치구의 경계 정보를 담은 `seoul.geojson` 파일도 함께 활용하였습니다.

---

## 🔧 데이터 이슈 및 보완

- **가로등 데이터 부재 보완 방법**  
  1. 일부 자치구의 가로등 전력 사용량 및 개수 확보  
  2. 평균 전력 사용량 계산  
  3. 이를 기준으로 타 자치구의 가로등 수 추정

---

## 📊 상관관계 및 다중공선성 분석

- `value_heatmap.py`를 통해 변수 간 상관계수를 히트맵으로 시각화
- `statsmodels` 기반으로 VIF(Variance Inflation Factor) 계산

| 변수명     | VIF   |
|------------|--------|
| CCTV수     | 1.71   |
| 인구수     | 1.82   |
| 평균소득   | 2.48   |
| 유흥주점수 | 1.10   |
| 가로등수   | 2.61   |

> ✅ 모든 변수의 VIF < 5 → 다중공선성 문제 없음

---

## 📈 다중회귀분석 (OLS)

- 종속 변수: 총범죄  
- 독립 변수: CCTV수, 인구수, 평균소득, 유흥주점수, 가로등수  
- R² = **0.843**, Adj. R² = **0.801**

**유의미한 변수 (p < 0.05)**:
- 인구수: p = 0.001  
- 유흥주점수: p = 0.000  

---

## 🔬 정규화 회귀: Lasso & Ridge

### 📌 Lasso 회귀 결과
- α = 1.41  
- R² = 0.843  
- 모든 변수 유지됨  
- **가장 영향력 큰 변수**: 인구수, 유흥주점수

### 📌 Ridge 회귀 결과
- α = 10.0  
- R² = 0.808  
- 계수 분산 안정화됨

> ✅ Lasso 모델이 더 높은 설명력을 보임

---

## 🌍 자치구별 범죄 예측 vs 실제 차이 시각화

- 회귀분석 결과를 바탕으로 **예측 총범죄 수 - 실제 총범죄 수**의 잔차 계산  
- `crime_residual_map.html`에서 자치구별로 시각화  
- `seoul.geojson`을 활용하여 Choropleth 지도 생성 및 folium으로 구현

**색상 해석 (PuOr 컬러맵 기준)**:
- 🔴 빨강: 예측보다 실제 범죄가 많음 → 외부 요인 영향 가능성  
- 🔵 파랑: 예측보다 실제 범죄가 적음 → 치안정책 효과 or 모델 과대추정  
- 🟡 중립: 예측과 실제가 거의 일치

**인사이트**:
- 잔차 분포가 고르게 퍼짐 → 과적합 위험 낮음  
- 예측 오차가 큰 자치구는 보완 변수(유동 인구, 관광지 등) 추가 필요  
- 정책 수립에 실질적인 도움 제공 가능

---

## ✅ 가설 평가

| 항목 | 평가 내용 |
|------|-----------|
| **가설 수용 여부** | ✅ 수용: 모든 독립변수가 일정 수준 이상의 설명력 및 통계적 유의성 확보 (R² > 0.84) |
| **모델 신뢰성** | VIF < 5 → 다중공선성 문제 없음 |
| **의미 있는 변수** | 인구수, 유흥주점수 (p < 0.01) |
| **예측이 어려운 지역** | 종로구, 중구, 성동구 등 → 유동인구, 관광지 등 외부 요인 영향 가능성 |
| **과대예측 지역** | 관악구, 강서구 등 → 치안 정책 효과 또는 모델 과대추정 가능성 |

---

## 🧭 결론 및 시사점

- 범죄 발생은 주변 시설(유흥주점, CCTV, 가로등), 인구, 소득 등과 밀접한 관계  
- Lasso 분석에서 **모든 변수 유지** → 정책 수립에 고려될 수 있음  
- **잔차 기반 지도 분석**으로 이상 지역 조기 식별 가능  
- 향후에는 유동 인구, 지리적 특성, 출퇴근 인구 등 보완 변수 추가 분석 권장  
- **GeoJSON을 활용한 시각화**는 자치구별 정책 수립에 매우 직관적이고 실용적  
- **데이터 기반 범죄 예방 및 치안 정책 수립에 활용 가능**